<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Live Supply Status - Pakistan Utility Portal</title>
  <style>
    body{font-family:'Segoe UI',sans-serif;background:#f4f7fa;color:#2c3e50;margin:0;padding:20px;line-height:1.6}
    .container{max-width:700px;margin:40px auto;text-align:center}
    .back{display:inline-block;margin:20px 0;color:#3498db;text-decoration:none;font-weight:bold}
    h1{font-size:2.2rem;margin-bottom:10px}
    .card{background:#fff;padding:30px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.1);margin-bottom:30px}
    select{width:100%;padding:16px;margin:12px 0;border:1px solid #ddd;border-radius:12px;box-sizing:border-box;font-size:1.1rem}
    button{background:#3498db;color:#fff;padding:16px 32px;border:none;border-radius:12px;cursor:pointer;font-size:1.2rem;font-weight:bold}
    button:hover{background:#2980b9}
    .result{margin-top:40px;background:#fff;padding:35px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.1);display:none}
    .current-status{font-size:2.5rem;font-weight:bold;padding:25px;border-radius:16px;margin:20px 0}
    .on{background:#d4edda;color:#155724}
    .off{background:#f8d7da;color:#721c24}
    .low{background:#fff3cd;color:#856404}
    .schedule{margin-top:30px}
    .slot{display:flex;justify-content:space-between;align-items:center;margin:15px 0;padding:16px;background:#f8f9fa;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,.05)}
    .time{font-weight:bold;color:#2c3e50;font-size:1.1rem}
    .status-tag{padding:8px 16px;border-radius:50px;font-weight:bold;font-size:0.95rem}
    .download{background:#27ae60;color:#fff;padding:14px 30px;border:none;border-radius:12px;cursor:pointer;margin-top:30px;font-size:1.1rem}
    footer{margin-top:80px;color:#777;font-size:.9rem}
    .note{font-size:0.95rem;color:#e74c3c;margin-top:20px}
  </style>
</head>
<body>
<div class="container">
  <a href="index.html" class="back">Back to Home</a>
  <h1>Live Supply Status</h1>
  <p>Select utility, city, area & sub-area</p>

  <div class="card">
    <form id="form">
      <select id="utility" required>
        <option value="">Select Utility</option>
        <option value="electricity">Electricity</option>
        <option value="gas">Gas</option>
        <option value="water">Water</option>
      </select>

      <select id="city" required>
        <option value="">Select City</option>
      </select>

      <select id="area" required>
        <option value="">Select Area</option>
      </select>

      <select id="subArea">
        <option value="">Select Sub-Area (optional)</option>
      </select>

      <button type="submit">Check Status</button>
    </form>
  </div>

  <div id="result" class="result">
    <h2 id="location"></h2>
    <div id="currentStatus" class="current-status">Please select above</div>
    <p id="currentTime" style="font-size:1.1rem;color:#555"></p>

    <div class="schedule">
      <h3>Today's Full Schedule</h3>
      <div id="scheduleList"></div>
    </div>

    <button onclick="window.print()" class="download">Download as PDF</button>
    <p class="note">Based on official Nov 2025 patterns • Verify with your utility app</p>
  </div>

  <footer>Pakistan Utility Portal © 2025</footer>
</div>

<script>
// Full Pakistan Cities + Areas + Sub-Areas (Fixed Structure)
const cityData = {
  karachi: {
    areas: ["Nazimabad","North Nazimabad","Lyari","Clifton","Defence DHA","Gulshan-e-Iqbal","Gulistan-e-Johar","FB Area","Korangi","Landhi","Malir","Saddar","Shah Faisal Colony","Orangi Town","Surjani Town","Scheme 33","Buffer Zone","Gadap Town","Keamari","Bin Qasim","PECHS","Tariq Road"],
    subareas: {
      "Lyari": ["Baghdadi","Khadda","Singolane","Chakiwara","Nawabad","Agra Taj","Shah Baig Line","Kalakot","Hingorabad","Daryaabad","Nabi Bux","Kumbharwada"],
      "Defence DHA": ["Phase 1","Phase 2","Phase 3","Phase 4","Phase 5","Phase 6","Phase 7","Phase 8","Phase 9","Phase 10"],
      "Gulshan-e-Iqbal": ["Block 1 to 20"],
      "Nazimabad": ["Block A","Block B","Block C","Block D","Block E","Block F","Block G"],
      "North Nazimabad": ["Block A to N"]
    }
  },
  lahore: {
    areas: ["Gulberg","DHA","Johar Town","Model Town","Wapda Town","Valencia","Garden Town","Iqbal Town","Samanabad","Cantt","Township","Faisal Town","Sabzazar","Baghbanpura","Shalimar Town","Allama Iqbal Town"],
    subareas: {
      "DHA": ["Phase 1","Phase 2","Phase 3","Phase 4","Phase 5","Phase 6","Phase 7","Phase 8","Phase 9"],
      "Johar Town": ["Block A to R"],
      "Gulberg": ["Gulberg II","Gulberg III","Gulberg IV","Gulberg V"]
    }
  },
  islamabad: {
    areas: ["F-6","F-7","F-8","F-10","F-11","G-6","G-8","G-9","G-10","G-11","I-8","I-9","I-10","Blue Area","Bahria Town","DHA Islamabad"],
    subareas: {
      "G-9": ["G-9/1","G-9/2","G-9/3","G-9/4"],
      "F-10": ["F-10/1","F-10/2","F-10/3","F-10/4"],
      "Bahria Town": ["Phase 1 to 8"]
    }
  },
  rawalpindi: { areas: ["Saddar","Satellite Town","Bahria Town","DHA","Cantt","Chaklala","Westbridge"], subareas: {} },
  faisalabad: { areas: ["Civil Lines","Madina Town","Peoples Colony","Susan Road","Gulistan Colony","D Ground"], subareas: {} },
  multan: { areas: ["Cantt","Gulgasht","Model Town","Shalimar Colony","Shah Rukn-e-Alam"], subareas: {} },
  peshawar: { areas: ["Hayatabad","University Town","Cantt","Warsak Road","Ring Road"], subareas: { "Hayatabad": ["Phase 1","Phase 2","Phase 3","Phase 4","Phase 5","Phase 6","Phase 7"] } },
  quetta: { areas: ["Cantt","Jinnah Town","Satellite Town","Sariab Road"], subareas: {} },
  gujranwala: { areas: ["Model Town","Satellite Town","Cantt","DC Colony"], subareas: {} },
  sialkot: { areas: ["Cantt","Paris Road","Model Town","Defence Road"], subareas: {} },
  hyderabad: { areas: ["Qasimabad","Latifabad","Hirabad"], subareas: {} },
  bahawalpur: { areas: ["Model Town","Satellite Town","Cantt"], subareas: {} },
  sargodha: { areas: ["University Road","Satellite Town","Club Road"], subareas: {} }
};

// Schedule
const scheduleData = {
  electricity: { default: ["06:00 – 10:00 → ON","10:00 – 14:00 → OFF","14:00 – 18:00 → ON","18:00 – 22:00 → OFF","22:00 – 06:00 → ON"] },
  gas: { all: ["12:00 AM – 05:00 AM → FULL","05:00 AM – 09:00 AM → LOW","09:00 AM – 12:00 PM → FULL","12:00 PM – 12:00 AM → LOW"] },
  water: { lahore: ["04:00 AM – 10:00 AM → ON","02:00 PM – 06:00 PM → ON","08:00 PM – 12:00 AM → ON"], karachi: ["08:00 AM – 04:00 PM → NORMAL"] }
};

// Populate Cities
document.getElementById("utility").addEventListener("change", () => {
  const citySelect = document.getElementById("city");
  citySelect.innerHTML = '<option value="">Select City</option>';
  Object.keys(cityData).forEach(key => {
    const name = key.charAt(0).toUpperCase() + key.slice(1);
    citySelect.innerHTML += `<option value="${key}">${name}</option>`;
  });
  document.getElementById("area").innerHTML = '<option value="">Select Area</option>';
  document.getElementById("subArea").innerHTML = '<option value="">Select Sub-Area (optional)</option>';
});

// Populate Areas
document.getElementById("city").addEventListener("change", () => {
  const selected = document.getElementById("city").value;
  const areaSelect = document.getElementById("area");
  areaSelect.innerHTML = '<option value="">Select Area</option>';
  const areas = cityData[selected]?.areas || [];
  areas.forEach(a => areaSelect.innerHTML += `<option value="${a}">${a}</option>`);
  document.getElementById("subArea").innerHTML = '<option value="">Select Sub-Area (optional)</option>';
});

// Populate Sub-Areas
document.getElementById("area").addEventListener("change", () => {
  const city = document.getElementById("city").value;
  const area = document.getElementById("area").value;
  const subSelect = document.getElementById("subArea");
  subSelect.innerHTML = '<option value="">Select Sub-Area (optional)</option>';
  const subs = cityData[city]?.subareas?.[area] || [];
  subs.forEach(s => subSelect.innerHTML += `<option>${s}</option>`);
});

// Show Result
function showResult() {
  const utility = document.getElementById("utility").value;
  const city = document.getElementById("city").value;
  const area = document.getElementById("area").value;
  const subArea = document.getElementById("subArea").value || "";

  if (!utility || !city || !area) return alert("Please fill all required fields");

  const location = subArea ? `${area} - ${subArea}, ${city.charAt(0).toUpperCase() + city.slice(1)}` : `${area}, ${city.charAt(0).toUpperCase() + city.slice(1)}`;
  document.getElementById("location").textContent = `${utility.toUpperCase()} – ${location}`;

  const now = new Date();
  const h = now.getHours();
  document.getElementById("currentTime").textContent = "Updated: " + now.toLocaleTimeString();

  let status = "", color = "on";
  if (utility === "electricity") {
    status = (h >= 6 && h < 10) || (h >= 14 && h < 18) || (h >= 22 || h < 6) ? "Power is ON" : "Load Shedding Active";
    color = status.includes("ON") ? "on" : "off";
  } else if (utility === "gas") {
    status = (h < 5 || (h >= 9 && h < 12)) ? "Gas Full Pressure" : "Low Pressure";
    color = status.includes("Full") ? "on" : "low";
  } else if (utility === "water") {
    status = city === "lahore" ? ((h >= 4 && h < 10) || (h >= 14 && h < 18) || h >= 20 ? "Water ON" : "No Water") : (h >= 8 && h < 16 ? "Water ON" : "Low/No Water");
    color = status.includes("ON") ? "on" : "low";
  }

  document.getElementById("currentStatus").textContent = status;
  document.getElementById("currentStatus").className = "current-status " + color;

  // Schedule
  const list = document.getElementById("scheduleList");
  list.innerHTML = "";
  let slots = utility === "gas" ? scheduleData.gas.all : utility === "water" ? (city === "lahore" ? scheduleData.water.lahore : scheduleData.water.karachi) : scheduleData.electricity.default;

  slots.forEach(s => {
    const [t, st] = s.split(" → ");
    const c = st?.includes("ON") || st?.includes("FULL") || st?.includes("NORMAL") ? "on" : st?.includes("LOW") ? "low" : "off";
    list.innerHTML += `<div class="slot"><span class="time">${t}</span><span class="status-tag ${c}">${st || t}</span></div>`;
  });

  document.getElementById("result").style.display = "block";
  window.scrollTo(0, document.getElementById("result").offsetTop - 100);
}

document.getElementById("form").onsubmit = e => { e.preventDefault(); showResult(); };
setInterval(() => { document.getElementById("currentTime").textContent = "Updated: " + new Date().toLocaleTimeString(); }, 60000);
</script>
</body>
</html>
